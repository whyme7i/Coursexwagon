<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Thread | Coursexwagon</title>
<link href="https://fonts.googleapis.com/css2?family=Courier+Prime:wght@700;900&display=swap" rel="stylesheet">
<style>
body{font-family:'Courier Prime', monospace;background:#0a0a0a;color:#f0d084;min-height:100vh;padding:20px;}
.container{max-width:800px;margin:0 auto;padding:20px;background:#1a180fdd;border-radius:12px;box-shadow:0 0 15px #444;}
h1{font-size:1.8rem;margin-bottom:10px;}
p{margin-bottom:10px;}
.postAdmin{font-size:0.9rem;color:#ccc;margin-bottom:10px;}
.commentLock{margin-top:10px;}
.commentLock input{padding:6px 10px;border-radius:6px;border:1px solid #d4af37;background:#111;color:#f0d084;font-weight:700;width:60%;}
.commentLock button{padding:6px 12px;background:#d4af37;color:#111;border:none;border-radius:6px;margin-left:6px;font-weight:700;cursor:pointer;transition:0.3s;}
.commentLock button:hover{background:#b58f1f;color:#fff;}
.postLink{margin-top:10px;}
.postLink a{padding:8px 16px;background:#d4af37;color:#111;border-radius:6px;text-decoration:none;transition:0.3s;display:inline-block;}
.postLink a:hover{background:#b58f1f;color:#fff;}
.backBtn{margin-top:15px;padding:6px 12px;border-radius:6px;background:#111;color:#f0d084;border:1px solid #d4af37;cursor:pointer;}
.backBtn:hover{background:#b58f1f;color:#111;}
</style>
</head>
<body>

<div class="container" id="threadContainer">
  <!-- Thread loaded dynamically -->
</div>

<script>
function getPostId(){
  const params=new URLSearchParams(window.location.search);
  return params.get("id");
}

function loadThread(){
  const id=getPostId();
  let posts=JSON.parse(localStorage.getItem("audiobooks.html")||"[]");
  const post=posts.find(p=>p.id==id);
  const container=document.getElementById("threadContainer");
  if(!post){container.innerHTML="<h1>Thread not found</h1>";return;}
  
  container.innerHTML=`
    <h1>${post.emoji||"üíÄ"} ${post.title}</h1>
    <p>${post.desc}</p>
    <div class="postAdmin">Posted by ${post.admin}</div>
    ${post.social?`<div>Social Links: ${post.social}</div>`:""}
    ${post.comment?`<div class="commentLock">
      <input type="text" placeholder='Type "${post.comment}" to unlock link' id="commentInput'>
      <button id="unlockBtn">Unlock Link</button>
      <div class="postLink hidden"><a href="${post.url}" target="_blank">Download Link</a></div>
    </div>`:`<div class="postLink"><a href="${post.url}" target="_blank">Download Link</a></div>`}
    <button class="backBtn" onclick="window.history.back()">‚¨Ö Back</button>
  `;

  if(post.comment){
    const btn=document.getElementById("unlockBtn");
    const input=document.getElementById("commentInput");
    const linkDiv=container.querySelector(".postLink");
    btn.addEventListener("click",()=>{
      if(input.value.trim().toLowerCase()===post.comment.toLowerCase()){
        linkDiv.classList.remove("hidden");
        input.disabled=true;
        btn.disabled=true;
      } else alert("‚ùå Wrong comment, try again!");
    });
  }
}

window.addEventListener("load",loadThread);
</script>

</body>
</html>
