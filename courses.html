<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>COURSE.XWAGON â€” Courses Vault</title>
<style>
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box;}
body{
  font-family:'Courier New', monospace;
  background:#0a0a0a;
  color:#fff;
  letter-spacing:0.04em;
  min-height:100vh;
  overflow-x:hidden;
}
header{
  background:#111;
  padding:20px 25px;
  text-align:center;
  font-weight:900;
  font-size:1.4rem;
  color:#fff;
  position:fixed;
  top:0;left:0;right:0;
  z-index:1100;
  border-bottom:1px solid #333;
}
#searchBar{
  margin:100px auto 20px;
  max-width:600px;
  display:flex;
}
#searchBar input{
  flex:1;
  padding:10px;
  font-size:1rem;
  border-radius:5px;
  border:1px solid #fff;
  background:#111;
  color:#fff;
}
.container{
  max-width:1200px;
  margin:0 auto 50px;
  padding:0 24px;
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(320px,1fr));
  gap:30px;
}
.post-box{
  background:#111;
  border-left:5px solid #fff;
  padding:15px;
  border-radius:8px;
  box-shadow:0 0 10px #333;
  cursor:pointer;
  transition:0.3s;
}
.post-box:hover{box-shadow:0 0 15px #555;}
.post-box h4{margin-bottom:5px;font-weight:700;color:#fff;}
.post-box p{margin-bottom:8px;}
#sidebarToggle{
  position:fixed;top:18px;left:18px;
  background:#111;border:2px solid #fff;border-radius:6px;
  padding:12px 18px;cursor:pointer;font-weight:700;color:#fff;
  z-index:1150;transition:0.3s;
}
#sidebarToggle:hover{background:#fff;color:#111;}
#sidebar{
  position:fixed;top:0;left:-280px;width:280px;height:100vh;
  background:#111;padding:80px 24px 24px;
  display:flex;flex-direction:column;gap:20px;font-weight:700;color:#fff;
  text-transform:uppercase;letter-spacing:0.1em;border-radius:0 8px 8px 0;
  transition:left 0.3s ease;z-index:1140;overflow-y:auto;
}
#sidebar.open{left:0;}
#sidebar h2{margin-bottom:25px;font-weight:900;text-shadow:1px 1px 2px #333;}
#sidebar nav a{color:#fff;text-decoration:none;margin:15px 0;font-size:1.1rem;padding:10px 0;display:block;transition:0.3s;}
#sidebar nav a:hover{color:#aaa;text-shadow:0 0 6px #555;}
#overlay{position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,0.9);opacity:0;visibility:hidden;transition:0.3s;z-index:1130;}
#overlay.active{opacity:1;visibility:visible;}
</style>
</head>
<body>

<button id="sidebarToggle">MENU</button>
<div id="sidebar">
  <h2>COURSEXWAGON</h2>
  <nav>
    <a href="index.html">\\HOME//</a>
    <a href="audiobooks.html">/AUDIOBOOKS//</a>
    <a href="freebooks.html">\\FREE BOOKS</a>
    <a href="mailto:Coursexwagon@gmail.com">EMAIL</a>
    <a href="privacy.html">Privacy Policy</a>
    <a href="terms.html">Terms & Conditions</a>
    <a href="refund.html">Refund Policy</a>
    <a href="dmca.html">DMCA & Copyright</a>
    <div style="margin-top:15px;">Co-Founders:<br>Ignacio Chamboko & Don Kyono</div>
  </nav>
</div>
<div id="overlay"></div>

<header>
  PREMIUM COURSES â€” VIP HACKER FORUM
</header>

<div id="searchBar">
  <input type="text" id="searchInput" placeholder="Search threads...">
</div>

<main class="container" role="main" aria-label="Courses List">
  <div id="adminFeed">
    <h2 style="color:#fff;text-align:center;margin-bottom:15px;">ðŸ–¤ VIP HACKER FORUM â€” COURSES ðŸ–¤</h2>
  </div>
</main>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-app.js";
import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyDXEKOmJdN8lzvnUIAhVpzarXvgxanRYgs",
  authDomain: "coursexwagon-admins.firebaseapp.com",
  projectId: "coursexwagon-admins",
  storageBucket: "coursexwagon-admins.firebasestorage.app",
  messagingSenderId: "1081264056319",
  appId: "1:1081264056319:web:99c2814d8e83571c16e9ca",
  measurementId: "G-SR53N510NN"
};
const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

const sidebarToggle = document.getElementById('sidebarToggle');
const sidebar = document.getElementById('sidebar');
const overlay = document.getElementById('overlay');
sidebarToggle.addEventListener('click',()=>{
  sidebar.classList.toggle('open'); overlay.classList.toggle('active');
});
overlay.addEventListener('click',()=>{
  sidebar.classList.remove('open'); overlay.classList.remove('active');
});

const feed = document.getElementById('adminFeed');
const searchInput = document.getElementById('searchInput');
let threads = [];

async function loadAdminPosts(){
  feed.innerHTML = '<h2 style="color:#fff;text-align:center;margin-bottom:15px;">ðŸ–¤ VIP HACKER FORUM â€” COURSES ðŸ–¤</h2>';
  const snapshot = await getDocs(collection(db,"courses"));
  threads = [];
  snapshot.forEach(docSnap=>{
    const p = docSnap.data();
    threads.push(p);
  });
  displayThreads(threads);
}

function displayThreads(list){
  feed.innerHTML = '<h2 style="color:#fff;text-align:center;margin-bottom:15px;">ðŸ–¤ VIP HACKER FORUM â€” COURSES ðŸ–¤</h2>';
  list.forEach(p=>{
    const div = document.createElement('div');
    div.className="post-box";
    div.innerHTML = `<h4>${p.emoji?p.emoji+" ":""}${p.title}</h4>
                     <p>Posted by: ${p.admin}</p>`;
    div.onclick = ()=>{
      const threadWindow = window.open("", "_blank");
      threadWindow.document.write(`
        <html><head><title>${p.title}</title>
        <style>
          body{font-family:'Courier New', monospace;background:#0a0a0a;color:#fff;padding:30px;}
          a{color:#fff;text-decoration:underline;font-size:1.2rem;}
          #commentBox{margin:20px 0;} 
          button{padding:8px 15px;cursor:pointer;border:none;border-radius:5px;background:#fff;color:#000;font-weight:bold;}
          #commentBox input{padding:8px;width:80%;border-radius:5px;border:1px solid #fff;background:#111;color:#fff;}
        </style>
        </head>
        <body>
          <h1>${p.emoji?p.emoji+" ":""}${p.title}</h1>
          <p>Posted by: ${p.admin}</p>
          <p>${p.desc}</p>
          ${p.comment?`<div id="commentBox"><input type="text" id="userComment" placeholder="Enter comment to unlock link"><button id="unlockBtn">Unlock Link</button></div>`:""}
          <a id="downloadLink" href="${p.url}" target="_blank" style="display:${p.comment?'none':'inline'}">Download Link</a>
          <script>
            const btn=document.getElementById('unlockBtn');
            if(btn){
              btn.onclick=function(){
                const c=document.getElementById('userComment').value.trim();
                if(c.toLowerCase()=== '${p.comment.toLowerCase()}'){
                  document.getElementById('downloadLink').style.display='inline';
                  btn.parentElement.style.display='none';
                } else alert('Wrong comment!');
              }
            }
          <\/script>
        </body></html>
      `);
    };
    feed.appendChild(div);
  });
}

searchInput.addEventListener('input',()=>{
  const val = searchInput.value.toLowerCase();
  displayThreads(threads.filter(t=>t.title.toLowerCase().includes(val) || (t.desc && t.desc.toLowerCase().includes(val))));
});

window.onload=loadAdminPosts;
</script>

</body>
</html>
