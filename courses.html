<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>COURSE.XWAGON â€” Courses Vault</title>
<style>
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box;}
body{
  font-family:'Courier New', monospace;
  background:#0a0a0a;
  color:#d4af37;
  letter-spacing:0.04em;
  min-height:100vh;
}
header{
  background:#12100cdd;
  backdrop-filter:blur(6px);
  padding:20px 25px;
  text-align:center;
  font-weight:900;
  font-size:1.4rem;
  color:#d4af37;
  position:fixed;
  top:0;left:0;right:0;
  z-index:1100;
}
#searchBar{
  margin:120px auto 20px;
  max-width:600px;
  display:flex;
}
#searchBar input{
  flex:1;
  padding:10px;
  font-size:1rem;
  border-radius:5px;
  border:1px solid #d4af37;
  background:#111;
  color:#d4af37;
}
.container{
  max-width:1200px;
  margin:0 auto 200px;
  padding:0 24px;
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(320px,1fr));
  gap:30px;
}
.post-box{
  background:#1a180fdd;
  border-left:5px solid #d4af37;
  padding:15px;
  border-radius:8px;
  box-shadow:0 0 10px #5a3c1a88;
  cursor:pointer;
  transition:0.3s;
}
.post-box:hover{box-shadow:0 0 20px #806232cc;}
.post-box h4{margin-bottom:5px;font-weight:700;color:#d4af37;}
.post-box p{margin-bottom:8px;}
footer{
  background:#12100cdd;
  color:#3b2c10cc;
  text-align:center;
  padding:18px 15px;
  font-size:0.85rem;
  border-top:1px solid #5a3c1a;
  font-weight:700;
  letter-spacing:0.06em;
  margin-top:200px;
}
footer a{color:#d4af37;text-decoration:none;margin:0 10px;}
footer a:hover{color:#806232;}
</style>
</head>
<body>

<header>
  PREMIUM COURSES â€” VIP HACKER FORUM
</header>

<div id="searchBar">
  <input type="text" id="searchInput" placeholder="Search threads...">
</div>

<main class="container" role="main" aria-label="Courses List">
  <div id="adminFeed">
    <h2 style="color:#d4af37;text-align:center;margin-bottom:15px;">ðŸ–¤ VIP HACKER FORUM â€” COURSES ðŸ–¤</h2>
  </div>
</main>

<footer>
  <div class="cofounders">Co-Founders: Ignacio Chamboko & Don Kyono</div>
  <div>
    <a href="#">Privacy Policy</a> |
    <a href="#">Terms & Conditions</a> |
    <a href="#">Refund Policy</a> |
    <a href="#">DMCA & Copyright</a>
  </div>
  <div>Email: <a href="mailto:Coursexwagon@gmail.com">Coursexwagon@gmail.com</a></div>
</footer>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-app.js";
import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyDXEKOmJdN8lzvnUIAhVpzarXvgxanRYgs",
  authDomain: "coursexwagon-admins.firebaseapp.com",
  projectId: "coursexwagon-admins",
  storageBucket: "coursexwagon-admins.firebasestorage.app",
  messagingSenderId: "1081264056319",
  appId: "1:1081264056319:web:99c2814d8e83571c16e9ca",
  measurementId: "G-SR53N510NN"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

const feed = document.getElementById('adminFeed');
const searchInput = document.getElementById('searchInput');
let threads = [];

async function loadAdminPosts(){
  feed.innerHTML = '<h2 style="color:#d4af37;text-align:center;margin-bottom:15px;">ðŸ–¤ VIP HACKER FORUM â€” COURSES ðŸ–¤</h2>';
  const snapshot = await getDocs(collection(db,"courses"));
  threads = [];
  snapshot.forEach(docSnap=>{
    const p = docSnap.data();
    threads.push(p);
  });
  displayThreads(threads);
}

function displayThreads(list){
  list.forEach(p=>{
    const div = document.createElement('div');
    div.className="post-box";
    div.innerHTML = `<h4>${p.emoji?p.emoji+" ":""}${p.title}</h4>
                     <p>Posted by: ${p.admin}</p>`;
    div.onclick = ()=>{
      const threadWindow = window.open("", "_blank");
      threadWindow.document.write(`
        <html><head><title>${p.title}</title>
        <style>body{font-family:'Courier New', monospace;background:#0a0a0a;color:#d4af37;padding:30px;}
               a{color:#c0c0c0;text-decoration:underline;font-size:1.2rem;}
               #commentBox{margin:20px 0;} button{padding:8px 15px;cursor:pointer;border:none;border-radius:5px;background:#d4af37;color:#000;font-weight:bold;}
               #commentBox input{padding:8px;width:80%;border-radius:5px;border:1px solid #fff;background:#111;color:#fff;}</style>
        </head>
        <body>
          <h1>${p.emoji?p.emoji+" ":""}${p.title}</h1>
          <p>Posted by: ${p.admin}</p>
          <p>${p.desc}</p>
          ${p.comment?`<div id="commentBox"><input type="text" id="userComment" placeholder="Enter comment to unlock link"><button id="unlockBtn">Unlock Link</button></div>`:""}
          <a id="downloadLink" href="${p.url}" target="_blank" style="display:${p.comment?'none':'inline'}">Download Link</a>
          <script>
            const btn=document.getElementById('unlockBtn');
            if(btn){
              btn.onclick=function(){
                const c=document.getElementById('userComment').value.trim();
                if(c.toLowerCase()=== '${p.comment.toLowerCase()}'){
                  document.getElementById('downloadLink').style.display='inline';
                  btn.parentElement.style.display='none';
                } else alert('Wrong comment!');
              }
            }
          <\/script>
        </body></html>
      `);
    };
    feed.appendChild(div);
  });
}

searchInput.addEventListener('input',()=>{
  const val = searchInput.value.toLowerCase();
  displayThreads(threads.filter(t=>t.title.toLowerCase().includes(val) || (t.desc && t.desc.toLowerCase().includes(val))));
});

window.onload=loadAdminPosts;
</script>
</body>
</html>
